@model FODfinder.Models.Food.FoodSearchResult
@using Newtonsoft.Json.Linq

@{
    ViewBag.Title = "Index";
}

@section scripts {
    @Scripts.Render("~/Scripts/axios.min.js")
    @Scripts.Render("~/Scripts/bootstrap.min.js")
}

@Styles.Render("~/Content/font-awesome.min.css")
    <div class="container-fluid bg-secondary p-4 rounded-bottom">

        @if (Model == null)
        {
            <div class="container d-flex justify-content-center align-items-center bg-primary rounded p-4">
                @Html.React("FoodSearch", false)
                <p class="bg-secondary display-4 p-2 my-4 rounded shadow text-white text-center">Powered By USDA FoodData Central</p>

                <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/16.8.0/umd/react.development.js"></script>
                <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.8.0/umd/react-dom.development.js"></script>
                @Scripts.Render("~/bundles/FoodSearchBundle");
                @Html.ReactInitJavaScript()
            </div>
        }
        else
        {
            @Html.React("FoodSearch", false)
            @Html.React("FoodSearchResults", new
            {
                results = JArray.FromObject(Model.Foods).ToString(),
                currentPage = Model.CurrentPage,
                totalPages = Model.TotalPages,
                totalHits = Model.TotalHits,
                query = Model.Query
            })

            <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/16.8.0/umd/react.development.js"></script>
            <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.8.0/umd/react-dom.development.js"></script>
            @Scripts.Render("~/bundles/FoodSearchBundle");
            @Scripts.Render("~/bundles/FoodSearchResults");
            @Html.ReactInitJavaScript()
        }

    </div>
